---
knit: "bookdown::render_book" # This lines needs to be FIRST, if you file is not named index.Rmd!
site: bookdown::bookdown_site
documentclass: book

title: "The R4GC Book"
# title: "R for Government of Canada"
# title: "Learn Data Science with R (The R4GC Book)" # Use R in GC


subtitle: "Learn Data Science with R: Notes and tutorials from the R4GC Community 'Lunch and Learn' meetups"
# subtitle: "Notes and tutorials from the R4GC Community meetups"

# author: "Dmitry Gorodnichy and Patrick Little"
# author:
#   - Dmitry Gorodnichy
#   - Patrick Little

author: |
  Dmitry Gorodnichy and Patrick Little    
  URL: [https\://open-canada.github.io/r4gc](https\://open-canada.github.io/r4gc)
  
description: "Notes and tutorials from 'Lunch and Learn Data Science with R' weekly meetups organized by the R4GC Community"

date: "`r format(Sys.time(), '%d %B %Y')`"
# 
# date: |
#   `r format(Sys.time(), '%d %B %Y')`   
#   URL: [https\://open-canada.github.io/r4gc](https\://open-canada.github.io/r4gc)
github-repo: "open-canada/r4gc"
url: 'https\://open-canada.github.io/r4gc'

# https://github.com/rstudio/bookdown/blob/master/inst/templates/bs4_book.html.
output:
  # bookdown::bs4_book: default
  # bookdown::bs4_book:  #  needs this - install.packages("downlit")
    # includes:
    #   before_body: assets/header.html

  bookdown::gitbook:
    # includes:
    #   before_body: assets/header.html
    config:
      toc:
        collapse: section # subsection # none
        before: |
          <!-- <li><a href="index.html"> "R4GC workbook"</a> </li> -->
          <li><a href="index.html"> <img width="100%" src="images/r4gc-banner.png"> </a>      </li>
        after: |
          <li> This book is built using <a href="https://bookdown.org"> bookdown</a> </li>
      download: [epub,pdf]
      sharing:
        facebook: yes
        linkedin: yes
   
    
  # bookdown::html_document2:  # I need compile it from here By clicking "knit" NOT from Build menu!
  #   toc: yes
  #   toc_depth: 2
  #   toc_float: yes
  #   collapsed: yes # no
  #   number_sections: false
  # 
  # bookdown::epub_book: default
---

<!-- <a href="https://www.bookdown.org" target="blank">bookdown</a> -->

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo=T) # Set echo=T to use with "code_folding: hide"
```


<!-- # (PART\*) Introductory notes{-} -->

<!-- #  Raison d'être  {-} -->
<!-- # Preface {-}  -->
<!-- # About {-} -->

# Raison d'être  {#index .unnumbered}



[![GCcollab logo](images/r4gc-banner.png){.cover width="100%"}](https://gccollab.ca/groups/profile/7391537/r4gc-use-r-community-use-r)

<!-- This is the workbook of the _R4GC (Use R!) Community_. -->

<!-- ## Book source and credits -->

This book is prepared as part of the R4GC Community  skill enhancing and knowledge gathering  exercise. 

It  aims at consolidating the knowledge-based that is being gathered by the R4GC Community spread across various R4GC community portals and discussions.

It also serves to illustrate - as always with source code - one of the most powerful 
features of R, which is 
<!-- the capability to collaboratively develop data science codes and reports using RMarkdown. -->
the collaborative peer-reviewed development of data science codes and reports using [R Markdown](https://rmarkdown.rstudio.com/).

<!-- ## History & portals {-} -->


## R4GC Community {-}

R4GC Community (formerly called "Use R!" GCCollab community) 
was created in March 2021 to bring together the R users across the Government of Canada.
Here we gather and curate the knowledgebase related to the use of  R  within the Government of Canada. 
Everyone is welcome to join, whether you are an advanced R user, just starting learning it, or simply want to learn more about data science and how it is done.

<!-- ### History -->

The idea to create this group came after the [GC Data2021 Conference](https://www.csps-efpc.gc.ca/events/data-conference2021) [Data Literacy Fest workshop on Data Engineering Challenges and Solutions: Demonstration of Shiny](#gcdata2021).   The highest voted question during the discussion there was : _"How can I get more help for our members to enhance their knowledge and "spread the word" and raise more awareness regard to this tool?"_ The creation of this community group is the answer to this question.
 
By November 2021, the  R4GC  GCCollab group has been become one of the largest active data science practitioners groups in Canada, counting over a quarter  thousand of members. The weekly "Lunch and Learn Data Science with R" meetups organized by the R4GC Community have been attended by data practitioners from over twenty government departments,  and generated
hundreds of questions/answers, a dozen of tutorials, multiple open to use applications, and  thousands of line of open code. 

<!-- On October 29, 2021, the work of this group was presented at the  [2021 International Methodology Symposium](https://www.statcan.gc.ca/en/conferences/symposium2021/index). -->

This book aims at consolidating all knowledgebase gathered by the R4GC Community at its  portals and meetups

## "Lunch and Learn Data Science with R" meetups {-} 


_"Building advanced Data Science skills using R, together - one meeting at a time!"_


These  informal meetings are organized weekly during Friday lunch time (from 12:05 to 12:55). 
There data scientists wanting to upscale their knowledge of R and other Data Science related subjects get together to show and discuss their R codes and share their data coding tricks and methodologies.
Normally, each  session is focused on a particular subject or project with the codes shared on GCcode.

No registration is required to join the meeting.  However, in order to view the notes and  video-recordings from these meetups, you need to join this sub-group: https://gccollab.ca/groups/about/7855030. 
For Agenda and Dial-in MS Teams numbers please see Group Events page at https://gccollab.ca/event_calendar/group/7391537.


 
## Community portals {-}

The R4GC community makes used of the following colloaborative platforms provided by Share Services Canada.

<!-- This book aims at consolidating the knowledge spread across various R4GC community portals, described below. -->


####  GCcode group - r4gc {-}

URL: https://gccode.ssc-spc.gc.ca/r4gc

GCcode is the GitLab solution that is accessible from within the GC network. As such, it allows one to view and update (pull and push) codes and documentation with a single click of button on a GC laptop from an RStudio. The tutorial on how to do it is developed. The 'r4gc' group has been created within GCcodes, where the codes, tutorials and other resources are gathered. It contains three main folders:

 

- /codes. - This is where "raw" (not-reviewed, unedited) R codes contributed by GC community are uploaded. Currently, this includes codes for analyzing and visualizing PSES (Public Service Employee Survey) results, ATIP requests, COVID-19 statistics, and various codes for ease of day to day work and maintenance. Some codes are readily available to become packages, some are short code snippets taken from various blogs,  question and answer portals, such as www.stackoverflow.org and www.rseek.org, and open-source textbooks.

- /gc-packages. - This is where the work on packages being developed from the submitted "raw" codes is happening. Currently it includes repositories for building packages to process PSES results, COVID-19 data, and the utility functions package for data engineering and efficient data processing.

- /resources. - This where the rest of knowledge-base is gathered, including the tutorials, slides, and codes presented at the community weekly ‘Lunch and Learn’ meetups.

#### GCcollab: R4GC (Use R) {-}

URL: 
https://gccollab.ca/groups/profile/7391537/enuse-rfruse-r


GCcollab allows one to participate in the discussion from within and outside GC network (for registered users). This makes it convenient for gathering information from any sources, including those that my not be available from within the GC network. In order to facilitate the curation of knowledge, a number of discussion threads have been created there to address of topics of highest interest for the R4GC community. 
These are reviewed and updated regularly, commonly as part of  community weekly meetups.


<!-- ### GCcollab Subgroup: Lunch and Learn R {-} -->

<!-- URL: https://gccollab.ca/groups/profile/7855030/enfridays-lunch-and-learn-r-meet-upsfr -->

<!-- This subgroup is created for sharing minutes, notes and video-recordings from the community weekly meetups,  -->

#### GCwiki: UseR! {-}

URL: https://wiki.gccollab.ca/UseR!

This platform is used to consolidate all discussion topics in one place and link them with other data science resources in the wiki space.
 

#### GitHub: open-canada  {-}

URL: https://open-canada.github.io/UseR/ 

Inline with the GC policies of open science and open data \ref{#policies}, since most  information gathered by the R4GC community is unclassified and comes from public domain, a public facing organizational account has been created on GitHub (https://github.com/open-canada) for sharing and growing the R4GC community knowledgebase. This is where  public-facing community outputs are gathered, including the growing collection of Web Apps and codes that were built with contributions from GC data scientists using open source tools and data, located at https://github.com/open-canada/Apps 




<!-- ### Slido (r4gc) {-} -->

<!-- URL: https://sli.do.  Code "r4gc" -->

<!-- This platform is used for wider audience forums and conferences. A number of polls have been conducted there, in a addition to opening and ranking new questions. -->


## Community presentations {-}

The work of the R4GC community was presented at the 
2021 International Methodology Symposium organized by Statistics Canada in October 2021.
The slides for this presentation made available  by conference organizers here: [in English](https://docs.google.com/presentation/d/19zu27vrNfgtGKdOjjpqsGkhFnh8a7Ca2/) and [en français](https://docs.google.com/presentation/d/1GaY0bttRUIm67t16XludgCbJMZ_WyO8E/).

The data engineering work was also presented for the 2021 GC Data Conference Data Literacy Fest Workshop “Data Engineering Challenges and Solutions: Demo of Shiny” in February 2021. The video-recording of this workshop was made available by conference organizers and is available on  [YouTube](https://youtu.be/QWv6E3e7bek). 


## Français {-}

Pour l'instant, ce livre est développé seulement en anglais. Cependant, plusieurs de commentaires et trucs  qu'on partage dans notre communauté proviens également dans la langue française aussi. 

On espère qu'un moment donné 
on peut
d'avoir ce livre dans le deux langues officielles: en anglais et en français.
<!-- traduire ce livre  -->
On même peux se servir des outils automatisés  et intelligence artificielle - car nous sommes les scientifiques de données, n'est pas ? - pour automatiser le traduction de contexte de ce livre!


Si vous êtes intéressé de contribuer à nos efforts de traduire ce livre dans le langue de votre choix, 
veuillez contacter [modérateur de groupe](index.html#contacts).



# A propos {-}



<!-- ## About this book {-} -->

This is book is built using the [bookdown](https://bookdown.org) R package in RStudio.
It is hosted at Open Canada GitHub repo https://open-canada.github.io/r4gc.
The source code of it located at https://github.com/open-canada/r4gc.

<!-- - similar to many great data science textbooks that have been already published and made freely available on github and bookdown.org and other online platforms -->
Thus built, the book enables easy collaboration, transparency and peer-reviewing.

<!-- Additionally, as with any markdown file, in addition to the compiled html file, it also allows one to gather and save  discussion comments and  draft  ideas inside the source Rmd file. -->




## Disclaimer {-}

The views and opinions expressed in this article are those of the authors and do not necessarily reflect the official policy or position of any agency of the Government of Canada.


<!-- ### Authors bias disclosure -->


<!-- Dmitry from CS

Patrick from Open-->

<!-- ## Key differences from other books {-} -->
<!-- ## What makes this book different from other books {-} -->
<!-- ## Pedagogical approach  -->
<!-- Computing science bias / driver-->


<!-- ### Other formats {-} -->

<!-- One of the beauties of the `bookdown` R package is that it allows one to generate multiple type of outputs  from the same source .Rmd files. -->
<!-- , such as pdf, epub, and various hmtl formats (single page html, multiple-page two-column and multiple-page three-column formats, with and without interactive menus). -->
<!-- The alternative formats of this R4GC book will be placed here  https://open-canada.github.io/r4gc/alt. -->

<!-- - epub:  -->
<!-- - pdf: -->
<!-- - one-page html -->
<!-- - mulpi-page three-colummn website:  -->






## Contributors {.unnumbered}


<!-- R4GC is a collaborative effort of many people who have contributed to the development of the codes and knowledgebase that is gathered in the R4GC portals and highlighted in this paper: Jonathan Dench, Joseph Stinziano, Henry Luan, Eric Littlewood, Philippe-Israel Morin, Tony Machado, Maxime Girouard, Martin Jean, Tim Roy, Dejan Pavlic, Utku Suleymanoglu. The support from wider international R community through stackoverflow.org portal and knowledge-sharing events ( conferences and webinars ) organized by the RStudio is also gratefully acknowledged. -->


R4GC is a collaborative effort of many people who have contributed to the development of the knowledgebase that is gathered in this book.
They are listed below.

> Jonathan Dench, Joseph Stinziano, Henry Luan, Eric Littlewood, Philippe-Israel Morin, Tony Machado, Maxime Girouard, Martin Jean, Tim Roy, Mehrez Samaali, Sylvain Paquet, Dejan Pavlic, Utku Suleymanoglu, 

Additionally, much support has been also received from wider international R community through stackoverflow.org portal and knowledge-sharing events organized by the RStudio, as well as from several other Government of Canada employees who remained anonymous.

Their help is greatly appreciated.
<!-- and shows, once again, the power of open data science collaboration, where so much can be achieved when peers are help each other  -->







## Key principles {-}

### Open data, open source, open science {-}

<!-- open government open source , open knowledge -->

This book contains only the information and knowledge that was obtained from public domain.

It is licensed under the [Creative Commons Attribution-NonCommercial-NoDerivs 3.0](http://creativecommons.org/licenses/by-nc-nd/3.0/us/) License, and 
is (and will always be) **free to use**

<!-- In concordance with Open Government principles,  -->


### Chatham House Rule  {-}


<!-- Chatham House Rule for dialogue events {-} -->


This book is prepared using [the Chatham House rule](https://www.chathamhouse.org/about-us/chatham-house-rule).
The Chatham House Rule helps create a trusted environment to understand and resolve complex problems through dialog and timely open communication. 
Its guiding spirit is: share the information you receive, but do not reveal the identity of who said it. Hence,  no attributions are made and the identity of speakers
and participants is not disclosed.
It is based on the views and codes
contributed by community members as part of ongoing community events interactions. Offered as
a means to facilitate the discussion, the document does not constitute
an analytical document, nor does it represent any formal position of any
organization involved. 


## How to contribute {-}

Any chapter of this book can be edited by simply clicking on the "edit" button, which will lead to the corresponding source Rmd file in the book's repo, where you can make a change  in the document (in doing so, this repo will forked at your github account ) and submit ir to the book editor (by submitting the merge request).
Alternatively, you can always contact the R4GC group lead at the contact listed below and attend R4GC weekly meetups.






## About authors  {-}

[Dmitry Gorodnichy](https://www.linkedin.com/in/dmitry-gorodnichy) is Research Data Scientist with the Chief Data Office at the Canadian Border Services Agency. 

[Patrick Little](https://www.linkedin.com/in/patrickjlittle/) is Adviser on the Open Government systems team at the Treasury Board of Canada Secretariat. 

<!-- He is passionate about making the government data and tools open to public -->



<!-- ## Need  help? {-} -->

<!-- - Check `Use R!` GCCollab group: https://gccollab.ca/groups/profile/7391537/ -->
<!-- - Join us  for `Lunch and Learn` meet-up every Friday: https://gccollab.ca/groups/about/7855030 -->
<!-- - Contact us: dmitry.gorodnichy@cbsa-asfc.gc.ca -->

### Contacts {-}

For questions and feedback, please contact 
<!-- the group  moderator  -->
Dmitry Gorodnichy: <dmitry.gorodnichy@cbsa-asfc.gc.ca> 
<!-- or <dmitry@gorodnichy.ca> -->




# Introduction {-}

<!-- Abstract -->

Many Government of Canada groups are developing codes to process and visualize various kinds data, often duplicating each other’s efforts, with sub-optimal efficiency and limited level of code quality reviewing.
This book
<!-- This paper  -->
presents a pan-government  initiative to address this problem. The idea is to collaboratively build a common repository of code and knowledgebase for use by anyone in the government to perform many common data science tasks,  and, in doing that, help each other to master both the data science coding skills and the industry standard collaborative practices. The book explains why R language is used as the language of choice for collaborative data science code development. It summaries R advantages and addresses its limitations, establishes the taxonomy of  discussion topics of highest interested to the GC data scientists working with R,  provides an overview of used collaborative platforms, and presents the results obtained to date. Even though the code knowledgebase is developed mainly in R,  it is meant  to be valuable also for data scientists coding in Python and other development environments.

#### Need for collaboration {-}

<!-- ### Data  as 'electricity' of the 21st century {-} -->

Data is the 'electricity' of the 21st century. It is everywhere. Everybody is using it, and one may not need special training or certification to work with data. However, in contrast to working with electricity, working with data relies on the use of data processing tools (codes), the number and complexity of which increases daily, and which are developed by other data practitioners. In other words, data science - by its nature - is the science that is fueled by collaboration of data scientists and that heavily relies on the quality of the shared data processing codes.


Globally, and in the Government of Canada (GC) in particular, data practitioners come from many different backgrounds and may not have equal level of code programming training, which hinders the development of  high-quality (efficient, scalable and  re-usable) codes for data science problems. This gap and the need for collaboration for data scientists, specifically those coding in R language, has been raised at the 2021 GC Data Conference Workshop on Data Engineering in February 2021. 
This book addresses this need.

<!-- This presentation describes a pan-government collaborative approach that has started following this workshop in order to address the identified need. -->


<!-- First (in Section 2), we review one the main challenges in data science, which is data engineering and which triggered the creation of the R4GC community of practice - the community that brings together data practitioners interested in using (or learning) the R language. The reasons why R is chosen as the language of choice for building the data science collaboration are explained in Section 3. Then (in Section 4), we describe the collaboration portals that have been set in support of the R4GC community activities and knowledgebase and overview key repositories and discussion threads that have been created there. Finally (in Section 5 and Appendix), we summarize the main outputs produced by the community to date. Whereas this paper serves as an introduction to the R4GC community efforts, the complete collection of the community knowledgebase is maintained as a shareable, free to use and collaboratively edited book (The R4GC Book) hosted at https://open-canada.github.io/r4gc. Feedback and contributions to this book are welcome, noting that only unclassified public domain knowledge is archived there. -->


#### Data Engineering challenge {-}

This effort has started from addressing the problem of data engineering, where it is understood - in analogy with the definition of software engineering by IEEE [2] - as the field of science and technology that deals with "developing scientific and technological knowledge, methods, and experience to the design, implementation, testing, and documentation" of data-driven systems and solutions; or - in analogy with the definition of software engineering at Google [3] -  as the field that "encompasses not just the act of writing code [for data analysis, in our case], but all of the tools and processes an organization uses to build and maintain that code over time".

#### Towards open source and open science {-}

<!-- Whereas -->
The spectacular growth of data science tools development is overwhelmingly attributed to the collaborative open nature of the current data science code development practices. Consequently, Canadian government is also 
<!-- at the early stages of  -->
adopting open source industry standards for data coding and reporting. Major shift towards enabling and promoting such practices within the government has started recently, when Government of Canada adopted a number of policies in support of Digital, Open Science, and Open Government [4], when Shared Services of Canada deployed a number of collaboration platforms that are now available to all GC organizations, and when IT Security of most  GC departments approved the use of open-source data science tools such as R and R Studio.


## Book outline {-}





The book is organized in several parts, according to 
the topics of  interest discussed in the GCcollab R4GC group.
Discussions around these topics are reviewed and updated regularly, commonly as part of  weekly community meetups.

<!-- Some contain more content, some less -->

Part I is dedicated to *General discussions*, which includes the following:

1. Why R?
3. Learn R: *R*ight way!
4. Great open-source textbooks
5. Events and forums for R users
6. Using R with GC data infrastructure 
2. Open source policies and guidelines
<!-- (gcdocs, AWS, etc) -->


Part II is dedicated to the *Best Practices and Efficient Coding in R* and includes the following:

7. Use R efficiently with data.table!
2. R and Python, Unite!
6. From Excel to R
8. Reading various kinds of data in R
9. Object oriented programming in R
9. Other tips and tricks

Part III is dedicated to *Visualization and Reporting *and includes the following: 

11. Literate programming and automated reports with ‘rmarkdown’
12. Data visualization with ‘ggplot2’ and its extensions
13. Interactive interfaces, applications and dashboards with 'shiny'
14. Interactive html with ‘plotly’, ‘Datatable’, ‘reactable’
16. Geo/Spatial coding and visualization in R

Part IV is dedicated *Advanced use of Data Science, Machine Learning,  and AI* and includes:

15. Entity resolution and record linking  in R
17. Text Analysis in R
18. Machine Learning and Modeling in R
19. Simulation and Optimization in R
20. Computer vision and Deep learning in R
19. Operationalizing in-house built tools and models


Part V contains the *Tutorials* developed by and for the community. These are:

19. GCCode 101
20. Packages 101
21. R101: Building COVID-19 Tracker App from scratch

22. Geo/Spatial coding and visualization with R. Part 1:
22. Text Analysis with R. Part 1:

and a number of short "How To: tutorials such as:

22. Dual Coding - Python and R unite !
22. Working with ggtables
22. Automate common look and feel of your ggplot graphs
and others


Part VI provides information about 
<!-- the outputs of the community development.  This includes a variety of -->
 Shiny Web Apps 
 <!-- and other codes and libraries -->
 developed by the community members. 
 <!-- All codes are made data-agnostic and do not contain any internal information -->

Finally, *Appendix* includes agendas for the R4GC community "Lunch and Learn" meetups, Future Plans and Release Notes.
<!-- , plans and  invitation for collaboration, in particular to make this knowledgebase bilingual - in support of bilingualism in Canada and as an another opportunity for applying data science skills for public good. -->





<!-- # (PART) Community discussions {-} -->

# (PART) General discussions {.unnumbered}



<!-- # General discussions -->



<!-- # (PART) GCcollab discussions {-} -->

<!-- # (PART) General Discussion: General tips {-} -->




```{r 11_gccollab_general, child = '11_gccollab_general.Rmd'}
```


<!-- # (PART) Efficient R coding {-} -->

# (PART) Art of R programming {-}

```{r 14_gccollab_efficient.Rmd, child = '14_gccollab_efficient.Rmd'}
```



# (PART) Visualization and Reporting {-}



```{r 12_gccollab_viz_reporting.Rmd, child = '12_gccollab_viz_reporting.Rmd'}
```


# (PART) Machine Learning and AI {-}



```{r 13_gccollab_ML, child = '13_gccollab_ML.Rmd'}
```




# (PART) Community Tutorials {-}

R4GC community "Lunch and Learn Data Science with R" weekly meetups : (NB: you need to join the "Lunch and Learn Data Science with R" meetups group to access recordings of these sessions)

```{r 01_gccode101.Rmd, child = '01_gccode101.Rmd'}
```


```{r 02_packages101.Rmd, child = '02_packages101.Rmd'}
```


# R101: Building COVID-19  Tracker App from scratch 

The following page provides codes and video-recording for this tutorial: 

https://open-canada.github.io/UseR/learn2020.html

You can see the final result here: https://itrack.shinyapps.io/covid/us.Rmd


# Short tutorials

## Geo/Spatial coding and visualization with R. Part 1:

Contributed by: 

## Text Analysis with R. Part 1: 

Contributed by: 

## Dual Coding - Python and R unite !

Contributed by: 

## Working with ggtables

Contributed by: 

## Automate common look and feel of your ggplot graphs

Contributed by: 

## Automated generation of report cards

Contributed by: 


# (PART) Community Development {-}

```{r 20_gc_apps, child = '20_gc_apps.Rmd'}
```







# (APPENDIX) Appendices {-}




```{r 30_gc_LL, child = '30_gc_LL.Rmd'}
```




# Technical information

This book is written in R Markdown and R, with the use of 'bookdown' package, and compiled in R Studio.

## Colophone

TBD


```{r 00-releaseNotes.Rmd, child = '00-releaseNotes.Rmd'}
```



```{r include=FALSE}
knitr::knit_exit()
```


